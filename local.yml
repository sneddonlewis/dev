- hosts: localhost
  become: true
  pre_tasks:
  - name: Update cache
    apt:
      update_cache: true
  - name: Update Apt
    apt:
      force_apt_get: true
      update_cache: true
      state: present

  - name: Install zsh
    apt: name=zsh
  - name: Change shell
    shell: chsh -s `which zsh`
  - name: Install ohmyzsh
    shell: curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh
  - name: Install zsh plugin for autosuggestions
    ansible.builtin.git:
      repo: https://github.com/zsh-users/zsh-autosuggestions.git
      dest: ~/.oh-my-zsh/plugins/zsh-autosuggestions
  - name: Update zshrc
    shell: sed -i 's/(git/(git zsh-autosuggestions/' ~/.zshrc
  
  - name: Install Node
    apt:
      name: ['nodejs', 'npm']

  - name: Install N
    npm:
      name: n
      global: yes

  - name: Install correct version of Node
    shell: n 14

